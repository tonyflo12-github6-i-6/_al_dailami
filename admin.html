<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¯ÙŠÙ„Ù…ÙŠ</title>
</head>
<body>

<div style="max-width: 500px; margin: 50px auto; font-family: Arial; border: 1px solid #ddd; padding: 20px; border-radius: 10px; box-shadow: 0px 4px 10px rgba(0,0,0,0.1);">
  <h2 style="text-align: center; color: #333;">Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø± Ø¬Ø¯ÙŠØ¯ - Ø§Ù„Ø¯ÙŠÙ„Ù…ÙŠ</h2>
  
  <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø¨Ø±:</label>
  <input type="text" id="title" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù‡Ù†Ø§..." style="width:100%; padding:10px; margin-bottom:15px; border: 1px solid #ccc; border-radius: 5px;">
  
  <label>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¨Ø±:</label>
  <textarea id="content" placeholder="Ø§ÙƒØªØ¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¨Ø± Ù‡Ù†Ø§..." style="width:100%; height:150px; padding:10px; margin-bottom:15px; border: 1px solid #ccc; border-radius: 5px;"></textarea>
  
  <label>Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© (URL):</label>
  <input type="text" id="image" placeholder="Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§..." style="width:100%; padding:10px; margin-bottom:20px; border: 1px solid #ccc; border-radius: 5px;">
  
  <button onclick="publishNews()" id="btnPublish" style="width:100%; padding:12px; background: #28a745; color:white; border:none; border-radius: 5px; cursor:pointer; font-size: 16px; font-weight: bold;">Ù†Ø´Ø± Ø§Ù„Ø®Ø¨Ø± Ø§Ù„Ø¢Ù† ğŸš€</button>
</div>

<script type="module">
  // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…ÙƒØªØ¨Ø§Øª Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js";

  // Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ù…Ø´Ø±ÙˆØ¹Ùƒ AlDailamiNews Ù…Ù† Ø§Ù„ØµÙˆØ± Ø§Ù„ØªÙŠ Ø£Ø±Ø³Ù„ØªÙ‡Ø§
  const firebaseConfig = {
    apiKey: "AIzaSyBFibp5QFXEJv1zT9HlAsgR2hoPy86mzUI",
    authDomain: "aldailaminews.firebaseapp.com",
    projectId: "aldailaminews",
    storageBucket: "aldailaminews.firebasestorage.app",
    messagingSenderId: "993196117811",
    appId: "1:993196117811:web:af8ad4734d0fa9aba13846",
    measurementId: "G-BEWL89Y9B7"
  };

  // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ù†Ø´Ø±
  window.publishNews = async () => {
    const title = document.getElementById('title').value;
    const content = document.getElementById('content').value;
    const image = document.getElementById('image').value;
    const btn = document.getElementById('btnPublish');

    if(!title || !content) {
        alert("Ù„Ø·ÙØ§Ù‹ Ø§Ù…Ù„Ø£ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰!");
        return;
    }

    try {
      btn.disabled = true;
      btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù†Ø´Ø±...";
      
      await addDoc(collection(db, "news"), {
        title: title,
        content: content,
        image: image,
        date: new Date()
      });

      alert("ØªÙ… Ù†Ø´Ø± Ø§Ù„Ø®Ø¨Ø± Ø¨Ù†Ø¬Ø§Ø­ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙŠÙ„Ù…ÙŠ!");
      
      // Ù…Ø³Ø­ Ø§Ù„Ø®Ø§Ù†Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø´Ø±
      document.getElementById('title').value = '';
      document.getElementById('content').value = '';
      document.getElementById('image').value = '';
      
    } catch (e) {
      console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø´Ø±: ", e);
      alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø´Ø±ØŒ ØªØ£ÙƒØ¯ Ù…Ù† ØªÙØ¹ÙŠÙ„ Firestore Database");
    } finally {
      btn.disabled = false;
      btn.innerText = "Ù†Ø´Ø± Ø§Ù„Ø®Ø¨Ø± Ø§Ù„Ø¢Ù† ğŸš€";
    }
  }
</script>

</body>
</html>
